<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Markpoint 5: Post Freight Charges &mdash; TAS Posting  documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="_static/dist/theme.css?v=ea6a6c20" />
            <link rel="index" title="Index" href="genindex.html" />
            <link rel="search" title="Search" href="search.html" />
            <link rel="top" title="TAS Posting  documentation" href="#" />
            <link rel="next" title="Markpoint 6: Post Fuel Charges" href="markpoint-6.html" />
            <link rel="prev" title="Markpoint 4: Post to General Ledger" href="markpoint-4.html" />
    </head>
<body>
    <script type="text/javascript" src="_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="_static/img/wagtail-logo-new.svg" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        ADV 5.1 Posting Migration
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="post_so.html"><code class="docutils literal notranslate"><span class="pre">post_so</span></code> Stored Procedure Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="post_so.html#helper-functions">Helper functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="pre-valiation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-1.html">Mark Point 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-3.html">Mark Point 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-4.html">Mark Point 4</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Mark Point 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-6.html">Mark Point 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-7.html">Mark Point 7</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-8.html">Mark Point 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-9.html">Mark Point 9</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-10.html">Mark Point 10</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-11.html">Mark Point 11</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-12.html">Mark Point 12</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-13.html">Mark Point 13</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-14.html">Mark Point 14</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-15.html">Mark Point 15</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-16.html">Mark Point 16</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-17.html">Mark Point 17</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-18.html">Mark Point 18</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-19.html">Mark Point 19</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-20.html">Mark Point 20</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-23.html">Mark Point 23</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-24.html">Mark Point 24</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-25.html">Mark Point 25</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint-26.html">Mark Point 26</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_invoice_from_history.html">create_invoice_from_history</a></li>
<li class="toctree-l1"><a class="reference internal" href="post_to_gl2.html">post_to_gl2</a></li>
<li class="toctree-l1"><a class="reference internal" href="all_tables.html">All Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="markpoint.html">Markpoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="errorlog.html">ErrorLog</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">Markpoint 5: Post Freight Charges</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="https://github.com/wagtail/sphinx_wagtail_theme/blob/main/docs/markpoint-5.md" rel="nofollow">
        <span class="btn-icon"><span class="fab fa-github"></span></span>
        <span class="btn-text">Edit on GitHub</span>
    </a>
    <a class="btn btn-sm btn-light text-decoration-none" href="_sources/markpoint-5.md.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="markpoint-5-post-freight-charges">
<h1>Markpoint 5: Post Freight Charges<a class="headerlink" href="#markpoint-5-post-freight-charges" title="Link to this heading">¶</a></h1>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>This function posts freight charges to the general ledger if the freight amount is not zero. The general ledger account is selected based on the customer class and the invoice group. If the customer class is <code class="docutils literal notranslate"><span class="pre">IC</span></code>, <code class="docutils literal notranslate"><span class="pre">GP</span></code>, or if the invoice group is <code class="docutils literal notranslate"><span class="pre">CAN</span></code>, specific GL accounts are used. The department code for freight is based on the invoice location.</p>
</section>
<section id="sql-function">
<h2>SQL Function<a class="headerlink" href="#sql-function" title="Link to this heading">¶</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="n">markpoint_5_PostFreightToGL</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">@</span><span class="n">invoiceNum</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">AS</span>
<span class="k">BEGIN</span>
<span class="w">    </span><span class="k">DECLARE</span><span class="w"> </span><span class="o">@</span><span class="n">frght_glacct</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="k">DECLARE</span><span class="w"> </span><span class="o">@</span><span class="n">invFrght</span><span class="w"> </span><span class="nb">DECIMAL</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="k">DECLARE</span><span class="w"> </span><span class="o">@</span><span class="n">invGroup</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="k">DECLARE</span><span class="w"> </span><span class="o">@</span><span class="n">invLoc</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="k">DECLARE</span><span class="w"> </span><span class="o">@</span><span class="n">cusClass</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="k">DECLARE</span><span class="w"> </span><span class="o">@</span><span class="n">post_nolock</span><span class="w"> </span><span class="nb">BIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">    </span><span class="c1">-- Get invoice details</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">@</span><span class="n">invFrght</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BKAR_INV_FRGHT</span><span class="p">,</span><span class="w"> </span><span class="o">@</span><span class="n">invGroup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BKAR_INV_GROUP</span><span class="p">,</span><span class="w"> </span>
<span class="w">           </span><span class="o">@</span><span class="n">invLoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">LEFT</span><span class="p">(</span><span class="n">BKAR_INV_LOC</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">BKARINV</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">BKAR_INV_NUM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="n">invoiceNum</span><span class="p">;</span>

<span class="w">    </span><span class="c1">-- If freight is zero, exit function</span>
<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="o">@</span><span class="n">invFrght</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">RETURN</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">END</span>

<span class="w">    </span><span class="c1">-- Get customer class</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">@</span><span class="n">cusClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BKAR_CLASS</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">BKARCUST</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">BKAR_CUSTCODE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">BKAR_INV_CUSCOD</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">BKARINV</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">BKAR_INV_NUM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="n">invoiceNum</span><span class="p">);</span>

<span class="w">    </span><span class="c1">-- Determine GL account for freight based on customer class and invoice group</span>
<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="o">@</span><span class="n">cusClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;IC&#39;</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="o">@</span><span class="n">frght_glacct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;40501     &#39;</span>
<span class="w">    </span><span class="k">END</span>
<span class="w">    </span><span class="k">ELSE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="o">@</span><span class="n">cusClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;GP&#39;</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="o">@</span><span class="n">frght_glacct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;40505     &#39;</span>
<span class="w">    </span><span class="k">END</span>
<span class="w">    </span><span class="k">ELSE</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="o">@</span><span class="n">frght_glacct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;40500     &#39;</span>
<span class="w">    </span><span class="k">END</span>

<span class="w">    </span><span class="c1">-- If invoice group is &#39;CAN&#39;, set a different GL account</span>
<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="o">@</span><span class="n">invGroup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;CAN&#39;</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="o">@</span><span class="n">frght_glacct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;40502     &#39;</span>
<span class="w">    </span><span class="k">END</span>

<span class="w">    </span><span class="c1">-- Markpoint 5 before posting</span>
<span class="w">    </span><span class="k">EXEC</span><span class="w"> </span><span class="n">markpoint_5_SaveToGL</span><span class="w"> </span><span class="o">@</span><span class="n">invoiceNum</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="c1">-- Post to general ledger using `post_to_gl2` function</span>
<span class="w">    </span><span class="k">EXEC</span><span class="w"> </span><span class="n">post_to_gl2</span><span class="w"> </span><span class="o">@</span><span class="n">frght_glacct</span><span class="p">,</span><span class="w"> </span><span class="o">@</span><span class="n">invLoc</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Freight from Invoice&#39;</span><span class="p">,</span><span class="w"> </span><span class="o">@</span><span class="n">invFrght</span><span class="p">,</span><span class="w"> </span>
<span class="w">                     </span><span class="o">@</span><span class="n">invoiceNum</span><span class="p">,</span><span class="w"> </span><span class="n">GETDATE</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;FRGHT&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Y&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="c1">-- Post lock check</span>
<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="o">@</span><span class="n">post_nolock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">RETURN</span><span class="w"> </span><span class="n">quit_posting</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="k">END</span>

<span class="w">    </span><span class="c1">-- Markpoint 5 after successful posting</span>
<span class="w">    </span><span class="k">EXEC</span><span class="w"> </span><span class="n">markpoint_5_SaveToGL</span><span class="w"> </span><span class="o">@</span><span class="n">invoiceNum</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="k">RETURN</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">END</span>
<span class="k">GO</span>
</pre></div>
</div>
</section>
<section id="breakdown-of-actions">
<h2>Breakdown of Actions:<a class="headerlink" href="#breakdown-of-actions" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p><strong>Freight Amount Check</strong>:</p>
<ul class="simple">
<li><p><strong>Condition</strong>: The function checks if the freight amount (<code class="docutils literal notranslate"><span class="pre">BKAR_INV_FRGHT</span></code>) is non-zero. If the freight amount is <code class="docutils literal notranslate"><span class="pre">0</span></code>, the function exits without making any changes.</p></li>
</ul>
</li>
<li><p><strong>Customer Class Lookup</strong>:</p>
<ul class="simple">
<li><p><strong>Condition</strong>: The function retrieves the customer class (<code class="docutils literal notranslate"><span class="pre">BKAR_CLASS</span></code>) based on the customer code from the invoice.</p></li>
<li><p><strong>Action</strong>: The freight GL account (<code class="docutils literal notranslate"><span class="pre">frght_glacct</span></code>) is determined based on the customer class:</p>
<ul>
<li><p>If the customer class is <code class="docutils literal notranslate"><span class="pre">IC</span></code>, the GL account is set to <code class="docutils literal notranslate"><span class="pre">'40501'</span></code>.</p></li>
<li><p>If the customer class is <code class="docutils literal notranslate"><span class="pre">GP</span></code>, the GL account is set to <code class="docutils literal notranslate"><span class="pre">'40505'</span></code>.</p></li>
<li><p>Otherwise, the GL account is set to <code class="docutils literal notranslate"><span class="pre">'40500'</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Invoice Group Check</strong>:</p>
<ul class="simple">
<li><p><strong>Condition</strong>: If the invoice group (<code class="docutils literal notranslate"><span class="pre">BKAR_INV_GROUP</span></code>) is <code class="docutils literal notranslate"><span class="pre">CAN</span></code>, the GL account is set to <code class="docutils literal notranslate"><span class="pre">'40502'</span></code> regardless of the customer class.</p></li>
</ul>
</li>
<li><p><strong>Department Code Assignment</strong>:</p>
<ul class="simple">
<li><p>The freight department code (<code class="docutils literal notranslate"><span class="pre">BKSY_AR_FRGTDPT</span></code>) is set to the first three characters of the invoice location (<code class="docutils literal notranslate"><span class="pre">BKAR_INV_LOC</span></code>).</p></li>
</ul>
</li>
<li><p><strong>General Ledger Posting</strong>:</p>
<ul class="simple">
<li><p>The function uses the <code class="docutils literal notranslate"><span class="pre">post_to_gl2</span></code> function to post the freight charges to the general ledger. The function passes the freight GL account, department, description, freight amount, invoice number, and other required details to <code class="docutils literal notranslate"><span class="pre">post_to_gl2</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Lock Handling</strong>:</p>
<ul class="simple">
<li><p>If the <code class="docutils literal notranslate"><span class="pre">post_nolock</span></code> flag is not set (<code class="docutils literal notranslate"><span class="pre">post_nolock</span> <span class="pre">=</span> <span class="pre">0</span></code>), the function calls <code class="docutils literal notranslate"><span class="pre">quit_posting</span></code> to terminate further processing.</p></li>
</ul>
</li>
<li><p><strong>Markpoint 5 Execution</strong>:</p>
<ul class="simple">
<li><p>The system executes <code class="docutils literal notranslate"><span class="pre">markpoint_5_SaveToGL</span></code> both before and after the posting action to indicate when the general ledger updates occur.</p></li>
</ul>
</li>
</ol>
</section>
<section id="error-handling">
<h2>Error Handling:<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Errors such as invalid inserts or missing required fields should raise exceptions that log the error and stop further processing.</p></li>
<li><p>If the freight amount is <code class="docutils literal notranslate"><span class="pre">0</span></code>, the function returns early without posting any freight charges.</p></li>
</ul>
</section>
<section id="testing">
<h2>Testing:<a class="headerlink" href="#testing" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p><strong>Test Freight Posting</strong>:</p>
<ul class="simple">
<li><p>Create test cases where the freight amount is non-zero to ensure the function correctly posts the freight charges to the general ledger based on the customer class and invoice group.</p></li>
<li><p>Ensure that <code class="docutils literal notranslate"><span class="pre">markpoint_5_SaveToGL</span></code> is called correctly both before and after the posting.</p></li>
</ul>
</li>
<li><p><strong>Test Freight Amount Zero</strong>:</p>
<ul class="simple">
<li><p>Create test cases where the freight amount is <code class="docutils literal notranslate"><span class="pre">0</span></code> to ensure the function exits without making any changes.</p></li>
</ul>
</li>
<li><p><strong>Test Invoice Group ‘CAN’</strong>:</p>
<ul class="simple">
<li><p>Create test cases where the invoice group is <code class="docutils literal notranslate"><span class="pre">CAN</span></code> to ensure the correct GL account (<code class="docutils literal notranslate"><span class="pre">40502</span></code>) is used for posting freight charges.</p></li>
</ul>
</li>
<li><p><strong>Test Post Lock Handling</strong>:</p>
<ul class="simple">
<li><p>Test scenarios where the <code class="docutils literal notranslate"><span class="pre">post_nolock</span></code> flag is either set or not set to ensure the function correctly calls <code class="docutils literal notranslate"><span class="pre">quit_posting</span></code> when required.</p></li>
</ul>
</li>
</ol>
</section>
<section id="notes">
<h2>Notes:<a class="headerlink" href="#notes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Post to General Ledger (<code class="docutils literal notranslate"><span class="pre">post_to_gl2</span></code>)</strong>: This procedure handles the actual posting of freight charges to the general ledger. Ensure that the procedure is correctly implemented and accepts the following parameters:</p>
<ul>
<li><p>Account</p></li>
<li><p>Department</p></li>
<li><p>Description (Freight from Invoice)</p></li>
<li><p>Total Amount (Freight)</p></li>
<li><p>Invoice Number</p></li>
<li><p>Invoice Date</p></li>
<li><p>Posting Type (<code class="docutils literal notranslate"><span class="pre">FRGHT</span></code>)</p></li>
<li><p>Customer Code (optional)</p></li>
<li><p>Lock Flag (<code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p>Confirmation (<code class="docutils literal notranslate"><span class="pre">Y</span></code>)</p></li>
</ul>
</li>
</ul>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="markpoint-4.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>Markpoint 4: Post to General Ledger
    </a>
    <a class="float-right" href="markpoint-6.html" title="Next">
        Markpoint 6: Post Fuel Charges <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">Markpoint 5: Post Freight Charges</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#sql-function">SQL Function</a></li>
<li><a class="reference internal" href="#breakdown-of-actions">Breakdown of Actions:</a></li>
<li><a class="reference internal" href="#error-handling">Error Handling:</a></li>
<li><a class="reference internal" href="#testing">Testing:</a></li>
<li><a class="reference internal" href="#notes">Notes:</a></li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/features/">Features</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/about-wagtail/"> About Wagtail</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/services/"> Services</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/blog/"> Blog</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/packages/"> Packages</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/developers/"> Developers</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                <p style="display: none">
                    <a class="text-light" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Wagtail Sphinx Theme 6.3.0
                    </a>
                </p>
            </div>
            <div class="text-center">
                    &copy; Copyright 2024, Chris Watkins
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script type="text/javascript" src="_static/dist/theme.js"></script>
        <script type="text/javascript" src="_static/dist/vendor.js"></script>
        <script type="text/javascript" src="_static/searchtools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>